
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="shortcut icon" href="../../img/jspsych-favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.1.7">
    
    
      
        <title>Data Storage, Aggregation, and Manipulation - jsPsych</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.19753c6b.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.196e0c26.min.css">
        
          
          
          <meta name="theme-color" content="#4cae4f">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
        
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-50563838-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview",document.location.pathname)})</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="green" data-md-color-accent="orange">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#data-in-jspsych-permanent-and-non-permanent-data" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="jsPsych" class="md-header-nav__button md-logo" aria-label="jsPsych">
      
  <img src="../../img/jspsych-logo-no-text-mono.svg" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            jsPsych
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Data Storage, Aggregation, and Manipulation
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/jspsych/jsPsych/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    jspsych/jspsych
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="jsPsych" class="md-nav__button md-logo" aria-label="jsPsych">
      
  <img src="../../img/jspsych-logo-no-text-mono.svg" alt="logo">

    </a>
    jsPsych
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/jspsych/jsPsych/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    jspsych/jspsych
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" >
    <label class="md-nav__link" for="nav-2">
      Tutorials
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Tutorials" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon"></span>
        Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/hello-world/" class="md-nav__link">
      The Basics: Hello World
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/rt-task/" class="md-nav__link">
      Demo Experiment: Simple Reaction Time Task
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/video-tutorials/" class="md-nav__link">
      Video Tutorials
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    <label class="md-nav__link" for="nav-3">
      Overview
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Overview" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon"></span>
        Overview
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../timeline/" class="md-nav__link">
      Creating an Experiment: The Timeline
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../plugins/" class="md-nav__link">
      Plugins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dynamic-parameters/" class="md-nav__link">
      Dynamic Parameters
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../style/" class="md-nav__link">
      Controlling Visual Appearance
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Data Storage, Aggregation, and Manipulation
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" class="md-nav__link md-nav__link--active">
      Data Storage, Aggregation, and Manipulation
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#data-in-jspsych-permanent-and-non-permanent-data" class="md-nav__link">
    Data in jsPsych: permanent and non-permanent data.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storing-data-in-jspsychs-data-structure" class="md-nav__link">
    Storing data in jsPsych's data structure
  </a>
  
    <nav class="md-nav" aria-label="Storing data in jsPsych's data structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-data-to-all-trials" class="md-nav__link">
    Adding data to all trials
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-data-to-a-particular-trial-or-set-of-trials" class="md-nav__link">
    Adding data to a particular trial or set of trials
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aggregating-and-manipulating-jspsych-data" class="md-nav__link">
    Aggregating and manipulating jsPsych data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storing-data-permanently-as-a-file" class="md-nav__link">
    Storing data permanently as a file
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storing-data-permanently-in-a-mysql-database" class="md-nav__link">
    Storing data permanently in a MySQL database
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../running-experiments/" class="md-nav__link">
      Running Experiments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../experiment-options/" class="md-nav__link">
      Experiment Settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../callbacks/" class="md-nav__link">
      Event-related Callback Functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../record-browser-interactions/" class="md-nav__link">
      Record Browser Interactions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../media-preloading/" class="md-nav__link">
      Media Preloading
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../fullscreen/" class="md-nav__link">
      Fullscreen Experiments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eye-tracking/" class="md-nav__link">
      Eye Tracking
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../exclude-browser/" class="md-nav__link">
      Exclude Participants Based on Browser Features
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../progress-bar/" class="md-nav__link">
      Automatic Progress Bar
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../prolific/" class="md-nav__link">
      Integrating with Prolific
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mturk/" class="md-nav__link">
      Integrating with Mechanical Turk
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../browser-device-support/" class="md-nav__link">
      Browser and Device Support
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" >
    <label class="md-nav__link" for="nav-4">
      Reference
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Reference" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../core_library/jspsych-core/" class="md-nav__link">
      jsPsych
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../core_library/jspsych-data/" class="md-nav__link">
      jsPsych.data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../core_library/jspsych-randomization/" class="md-nav__link">
      jsPsych.randomization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../core_library/jspsych-turk/" class="md-nav__link">
      jsPsych.turk
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../core_library/jspsych-pluginAPI/" class="md-nav__link">
      jsPsych.pluginAPI
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" >
    <label class="md-nav__link" for="nav-5">
      Plugins
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Plugins" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon"></span>
        Plugins
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/list-of-plugins/" class="md-nav__link">
      List of Plugins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-animation/" class="md-nav__link">
      jspsych-animation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-audio-button-response/" class="md-nav__link">
      jspsych-audio-button-response
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-audio-keyboard-response/" class="md-nav__link">
      jspsych-audio-keyboard-response
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-audio-slider-response/" class="md-nav__link">
      jspsych-audio-slider-response
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-canvas-button-response/" class="md-nav__link">
      jspsych-canvas-button-response
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-canvas-keyboard-response/" class="md-nav__link">
      jspsych-canvas-keyboard-response
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-canvas-slider-response/" class="md-nav__link">
      jspsych-canvas-slider-response
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-call-function/" class="md-nav__link">
      jspsych-call-function
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-categorize-animation/" class="md-nav__link">
      jspsych-categorize-animation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-categorize-html/" class="md-nav__link">
      jspsych-categorize-html
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-categorize-image/" class="md-nav__link">
      jspsych-categorize-image
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-cloze/" class="md-nav__link">
      jspsych-cloze
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-external-html/" class="md-nav__link">
      jspsych-external-html
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-free-sort/" class="md-nav__link">
      jspsych-free-sort
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-fullscreen/" class="md-nav__link">
      jspsych-fullscreen
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-html-button-response/" class="md-nav__link">
      jspsych-html-button-response
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-html-keyboard-response/" class="md-nav__link">
      jspsych-html-keyboard-response
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-html-slider-response/" class="md-nav__link">
      jspsych-html-slider-response
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-iat-html/" class="md-nav__link">
      jspsych-iat-html
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-iat-image/" class="md-nav__link">
      jspsych-iat-image
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-image-button-response/" class="md-nav__link">
      jspsych-image-button-response
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-image-keyboard-response/" class="md-nav__link">
      jspsych-image-keyboard-response
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-image-slider-response/" class="md-nav__link">
      jspsych-image-slider-response
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-instructions/" class="md-nav__link">
      jspsych-instructions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-maxdiff/" class="md-nav__link">
      jspsych-maxdiff
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-preload/" class="md-nav__link">
      jspsych-preload
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-rdk/" class="md-nav__link">
      jspsych-rdk
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-reconstruction/" class="md-nav__link">
      jspsych-reconstruction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-resize/" class="md-nav__link">
      jspsych-resize
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-same-different-html/" class="md-nav__link">
      jspsych-same-different-html
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-same-different-image/" class="md-nav__link">
      jspsych-same-different-image
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-serial-reaction-time/" class="md-nav__link">
      jspsych-serial-reaction-time
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-serial-reaction-time-mouse/" class="md-nav__link">
      jspsych-serial-reaction-time-mouse
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-survey-html-form/" class="md-nav__link">
      jspsych-survey-html-form
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-survey-likert/" class="md-nav__link">
      jspsych-survey-likert
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-survey-multi-choice/" class="md-nav__link">
      jspsych-survey-multi-choice
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-survey-multi-select/" class="md-nav__link">
      jspsych-survey-multi-select
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-survey-text/" class="md-nav__link">
      jspsych-survey-text
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-video-button-response/" class="md-nav__link">
      jspsych-video-button-response
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-video-keyboard-response/" class="md-nav__link">
      jspsych-video-keyboard-response
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-video-slider-response/" class="md-nav__link">
      jspsych-video-slider-response
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-virtual-chinrest/" class="md-nav__link">
      jspsych-virtual-chinrest
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-visual-search-circle/" class="md-nav__link">
      jspsych-visual-search-circle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-vsl-animate-occlusion/" class="md-nav__link">
      jspsych-vsl-animate-occlusion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-vsl-grid-scene/" class="md-nav__link">
      jspsych-vsl-grid-scene
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-webgazer-calibrate/" class="md-nav__link">
      jspsych-webgazer-calibrate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-webgazer-init-camera/" class="md-nav__link">
      jspsych-webgazer-init-camera
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/jspsych-webgazer-validate/" class="md-nav__link">
      jspsych-webgazer-validate
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" >
    <label class="md-nav__link" for="nav-6">
      Extensions
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Extensions" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon"></span>
        Extensions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../extensions/extensions/" class="md-nav__link">
      Extensions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../extensions/jspsych-ext-webgazer/" class="md-nav__link">
      jspsych-ext-webgazer.js
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" >
    <label class="md-nav__link" for="nav-7">
      About
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="About" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon"></span>
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/about/" class="md-nav__link">
      About jsPsych
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/support/" class="md-nav__link">
      Getting Help
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/contributing/" class="md-nav__link">
      Contributing to jsPsych
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/license/" class="md-nav__link">
      License
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#data-in-jspsych-permanent-and-non-permanent-data" class="md-nav__link">
    Data in jsPsych: permanent and non-permanent data.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storing-data-in-jspsychs-data-structure" class="md-nav__link">
    Storing data in jsPsych's data structure
  </a>
  
    <nav class="md-nav" aria-label="Storing data in jsPsych's data structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-data-to-all-trials" class="md-nav__link">
    Adding data to all trials
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-data-to-a-particular-trial-or-set-of-trials" class="md-nav__link">
    Adding data to a particular trial or set of trials
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aggregating-and-manipulating-jspsych-data" class="md-nav__link">
    Aggregating and manipulating jsPsych data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storing-data-permanently-as-a-file" class="md-nav__link">
    Storing data permanently as a file
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storing-data-permanently-in-a-mysql-database" class="md-nav__link">
    Storing data permanently in a MySQL database
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/jspsych/jsPsych/edit/master/docs/overview/data.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  <h1>Data Storage, Aggregation, and Manipulation</h1>
                
                <h2 id="data-in-jspsych-permanent-and-non-permanent-data">Data in jsPsych: permanent and non-permanent data.<a class="headerlink" href="#data-in-jspsych-permanent-and-non-permanent-data" title="Permanent link">&para;</a></h2>
<p>There are two very different kinds of data storage: data stored in <strong>memory</strong> and data stored <strong>permanently</strong>. Data stored permanently exists even after the browser running jsPsych closes, typically in a database or in a file on a server. Data stored in memory exists only as long the browser window running jsPsych is open.</p>
<p>jsPsych has many features for interacting with data stored in memory, but few for permanent data storage. This is a deliberate choice, as there are dozens of ways that data could be stored permanently. jsPsych does not lock you into one particular solution. However, saving data permanently is obviously a crucial component of any experiment, and the second half of this page contains a few suggestions on how to accomplish permanent data storage.</p>
<h2 id="storing-data-in-jspsychs-data-structure">Storing data in jsPsych's data structure<a class="headerlink" href="#storing-data-in-jspsychs-data-structure" title="Permanent link">&para;</a></h2>
<p>jsPsych has a centralized collection of data that is built as the experiment runs. Each trial adds to the collection, and you can access the data with various functions, including <code>jsPsych.data.get()</code>, which returns the entire set of data.</p>
<p>In most cases, data collection will be automatic and hidden. Plugins save data on their own so it is not uncommon to have the only interaction with the data be at the end of the experiment when it is time to save it in a permanent manner (see sections below about how to do this). However, there are some situations in which you may want to interact with the data; in particular, you may want to store additional data that the plugins are not recording, like a subject identifier or condition assignment. You may also want to add data on a trial by trial basis. For example, in a Stroop paradigm you would want to label which trials are congruent and which are incongruent. These scenarios are explored below.</p>
<h3 id="adding-data-to-all-trials">Adding data to all trials<a class="headerlink" href="#adding-data-to-all-trials" title="Permanent link">&para;</a></h3>
<p>Often it is useful to add a piece of data to <em>all</em> of the trials in the experiment. For example, appending the subject ID to each trial. This can be done  with the <code>jsPsych.data.addProperties()</code> function. Here is an example:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// generate a random subject ID with 15 characters</span>
<span class="kd">var</span> <span class="nx">subject_id</span> <span class="o">=</span> <span class="nx">jsPsych</span><span class="p">.</span><span class="nx">randomization</span><span class="p">.</span><span class="nx">randomID</span><span class="p">(</span><span class="mf">15</span><span class="p">);</span>

<span class="c1">// pick a random condition for the subject at the start of the experiment</span>
<span class="kd">var</span> <span class="nx">condition_assignment</span> <span class="o">=</span> <span class="nx">jsPsych</span><span class="p">.</span><span class="nx">randomization</span><span class="p">.</span><span class="nx">sampleWithoutReplacement</span><span class="p">([</span><span class="s1">&#39;conditionA&#39;</span><span class="p">,</span> <span class="s1">&#39;conditionB&#39;</span><span class="p">,</span> <span class="s1">&#39;conditionC&#39;</span><span class="p">],</span> <span class="mf">1</span><span class="p">)[</span><span class="mf">0</span><span class="p">];</span>

<span class="c1">// record the condition assignment in the jsPsych data</span>
<span class="c1">// this adds a property called &#39;subject&#39; and a property called &#39;condition&#39; to every trial</span>
<span class="nx">jsPsych</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">addProperties</span><span class="p">({</span>
  <span class="nx">subject</span><span class="o">:</span> <span class="nx">subject_id</span><span class="p">,</span>
  <span class="nx">condition</span><span class="o">:</span> <span class="nx">condition_assignment</span>
<span class="p">});</span>
</code></pre></div>
<h3 id="adding-data-to-a-particular-trial-or-set-of-trials">Adding data to a particular trial or set of trials<a class="headerlink" href="#adding-data-to-a-particular-trial-or-set-of-trials" title="Permanent link">&para;</a></h3>
<p>Data can be added to a particular trial by setting the <code>data</code> parameter for the trial. The <code>data</code> parameter is an object of key-value pairs, and each pair is added to the data for that trial.</p>
<div class="highlight"><pre><span></span><code><span class="kd">var</span> <span class="nx">trial</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;image-keyboard-response&#39;</span><span class="p">,</span>
  <span class="nx">stimulus</span><span class="o">:</span> <span class="s1">&#39;imgA.jpg&#39;</span><span class="p">,</span>
  <span class="nx">data</span><span class="o">:</span> <span class="p">{</span> <span class="nx">image_type</span><span class="o">:</span> <span class="s1">&#39;A&#39;</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Data declared in this way is also saved in the trials on any nested timelines:</p>
<div class="highlight"><pre><span></span><code><span class="kd">var</span> <span class="nx">block</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;image-keyboard-response&#39;</span><span class="p">,</span>
  <span class="nx">data</span><span class="o">:</span> <span class="p">{</span> <span class="nx">image_type</span><span class="o">:</span> <span class="s1">&#39;A&#39;</span> <span class="p">},</span>
  <span class="nx">timeline</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span><span class="nx">stimulus</span><span class="o">:</span> <span class="s1">&#39;imgA1.jpg&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="nx">stimulus</span><span class="o">:</span> <span class="s1">&#39;imgA2.jpg&#39;</span><span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p>The data object for a trial can also be updated in the <code>on_finish</code> event handler. You can override properties or add new ones. This is particularly useful for cases where the value depends on something that happened during the trial.</p>
<div class="highlight"><pre><span></span><code><span class="kd">var</span> <span class="nx">trial</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;image-keyboard-response&#39;</span><span class="p">,</span>
  <span class="nx">stimulus</span><span class="o">:</span> <span class="s1">&#39;imgA.jpg&#39;</span><span class="p">,</span>
  <span class="nx">on_finish</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">jsPsych</span><span class="p">.</span><span class="nx">pluginAPI</span><span class="p">.</span><span class="nx">compareKeys</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">response</span><span class="p">,</span> <span class="s1">&#39;j&#39;</span><span class="p">)){</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">correct</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">correct</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="aggregating-and-manipulating-jspsych-data">Aggregating and manipulating jsPsych data<a class="headerlink" href="#aggregating-and-manipulating-jspsych-data" title="Permanent link">&para;</a></h2>
<p>When accessing the data with <code>jsPsych.data.get()</code> the returned object is a special data collection object that exposes a number of methods for aggregating and manipulating the data. The full list of methods is detailed in the <a href="../../core_library/jspsych-data/">data module documentation</a>.</p>
<p>Here are some examples of data collection manipulation.</p>
<p>All data generated by the image-keyboard-response plugin:
<div class="highlight"><pre><span></span><code><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">jsPsych</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">filter</span><span class="p">({</span><span class="nx">trial_type</span><span class="o">:</span> <span class="s1">&#39;image-keyboard-response&#39;</span><span class="p">});</span>
</code></pre></div></p>
<p>All data generated by the categorize-image plugin with a correct response:
<div class="highlight"><pre><span></span><code><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">jsPsych</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">filter</span><span class="p">({</span><span class="nx">trial_type</span><span class="o">:</span> <span class="s1">&#39;categorize-image&#39;</span><span class="p">,</span> <span class="nx">correct</span><span class="o">:</span> <span class="kc">true</span><span class="p">});</span>
</code></pre></div></p>
<p>All data with a response time between 100 and 500ms:
<div class="highlight"><pre><span></span><code><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">jsPsych</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">filterCustom</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">){</span> <span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">rt</span> <span class="o">&gt;=</span> <span class="mf">100</span> <span class="o">&amp;&amp;</span> <span class="nx">x</span><span class="p">.</span><span class="nx">rt</span> <span class="o">&lt;=</span><span class="mf">500</span> <span class="p">});</span>
</code></pre></div></p>
<p>Applying filters consecutively to get all trials from a particular plugin with a response time above 100ms:
<div class="highlight"><pre><span></span><code><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">jsPsych</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">filter</span><span class="p">({</span><span class="nx">trial_type</span><span class="o">:</span> <span class="s1">&#39;image-keyboard-response&#39;</span><span class="p">}).</span><span class="nx">filterCustom</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">){</span> <span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">rt</span> <span class="o">&gt;</span> <span class="mf">100</span><span class="p">;</span> <span class="p">});</span>
</code></pre></div></p>
<p>Getting the data from the last n trials:
<div class="highlight"><pre><span></span><code><span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="mf">3</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">jsPsych</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">last</span><span class="p">(</span><span class="nx">n</span><span class="p">);</span>
</code></pre></div></p>
<p>Getting the data from the last n trials with a correct response:
<div class="highlight"><pre><span></span><code><span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="mf">3</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">jsPsych</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">filter</span><span class="p">({</span><span class="nx">correct</span><span class="o">:</span> <span class="kc">true</span><span class="p">}).</span><span class="nx">last</span><span class="p">(</span><span class="nx">n</span><span class="p">);</span>
</code></pre></div></p>
<p>Getting the data from the first n trials:
<div class="highlight"><pre><span></span><code><span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="mf">3</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">jsPsych</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">first</span><span class="p">(</span><span class="nx">n</span><span class="p">);</span>
</code></pre></div></p>
<p>Counting the number of trials in a data collection:
<div class="highlight"><pre><span></span><code><span class="kd">var</span> <span class="nx">count</span> <span class="o">=</span> <span class="nx">jsPsych</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">filter</span><span class="p">({</span><span class="nx">correct</span><span class="o">:</span> <span class="kc">true</span><span class="p">}).</span><span class="nx">count</span><span class="p">();</span>
</code></pre></div></p>
<p>Selecting all of the response times from a data collection:
<div class="highlight"><pre><span></span><code><span class="kd">var</span> <span class="nx">response_times</span> <span class="o">=</span> <span class="nx">jsPsych</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">select</span><span class="p">(</span><span class="s1">&#39;rt&#39;</span><span class="p">);</span>
</code></pre></div></p>
<p>Calculating various descriptive statistics on the response times in a data collection:</p>
<div class="highlight"><pre><span></span><code><span class="nx">jsPsych</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">select</span><span class="p">(</span><span class="s1">&#39;rt&#39;</span><span class="p">).</span><span class="nx">mean</span><span class="p">();</span>
<span class="nx">jsPsych</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">select</span><span class="p">(</span><span class="s1">&#39;rt&#39;</span><span class="p">).</span><span class="nx">sum</span><span class="p">();</span>
<span class="nx">jsPsych</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">select</span><span class="p">(</span><span class="s1">&#39;rt&#39;</span><span class="p">).</span><span class="nx">min</span><span class="p">();</span>
<span class="nx">jsPsych</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">select</span><span class="p">(</span><span class="s1">&#39;rt&#39;</span><span class="p">).</span><span class="nx">max</span><span class="p">();</span>
<span class="nx">jsPsych</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">select</span><span class="p">(</span><span class="s1">&#39;rt&#39;</span><span class="p">).</span><span class="nx">variance</span><span class="p">();</span>
<span class="nx">jsPsych</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">select</span><span class="p">(</span><span class="s1">&#39;rt&#39;</span><span class="p">).</span><span class="nx">sd</span><span class="p">();</span>
<span class="nx">jsPsych</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">select</span><span class="p">(</span><span class="s1">&#39;rt&#39;</span><span class="p">).</span><span class="nx">median</span><span class="p">();</span>
<span class="nx">jsPsych</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">select</span><span class="p">(</span><span class="s1">&#39;rt&#39;</span><span class="p">).</span><span class="nx">count</span><span class="p">();</span>
</code></pre></div>
<h2 id="storing-data-permanently-as-a-file">Storing data permanently as a file<a class="headerlink" href="#storing-data-permanently-as-a-file" title="Permanent link">&para;</a></h2>
<p>This is one of the simplest methods for saving jsPsych data on the server that is running the experiment. It involves a short PHP script and a few lines of JavaScript code. This method will save each participant's data as a CSV file on the server. <strong>This method will only work if you are running on a web server with PHP installed, or a local server with PHP (e.g., <a href="https://www.apachefriends.org/index.html">XAMPP</a>).</strong></p>
<p>This method uses a simple PHP script to write files to the server:</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>
<span class="nv">$post_data</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nb">file_get_contents</span><span class="p">(</span><span class="s1">&#39;php://input&#39;</span><span class="p">),</span> <span class="k">true</span><span class="p">);</span> 
<span class="c1">// the directory &quot;data&quot; must be writable by the server</span>
<span class="nv">$name</span> <span class="o">=</span> <span class="s2">&quot;data/&quot;</span><span class="o">.</span><span class="nv">$post_data</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span><span class="o">.</span><span class="s2">&quot;.csv&quot;</span><span class="p">;</span> 
<span class="nv">$data</span> <span class="o">=</span> <span class="nv">$post_data</span><span class="p">[</span><span class="s1">&#39;filedata&#39;</span><span class="p">];</span>
<span class="c1">// write the file to disk</span>
<span class="nb">file_put_contents</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="nv">$data</span><span class="p">);</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<p>The <code>file_put_contents($filename, $data)</code> method requires permission to write new files. An easy way to solve this is to create a directory on the server that will store the data and use the chmod command to give all users write permission to that directory. In the above example, the directory <code>data/</code> is used to store files.</p>
<p>To use the PHP script, the JavaScript that runs jsPsych needs to send the <code>filename</code> and <code>filedata</code> information. This is done through an <a href="http://www.w3schools.com/xml/ajax_intro.asp">AJAX</a> call.</p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span> <span class="nx">saveData</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">data</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
  <span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">&#39;POST&#39;</span><span class="p">,</span> <span class="s1">&#39;write_data.php&#39;</span><span class="p">);</span> <span class="c1">// &#39;write_data.php&#39; is the path to the php file described above.</span>
  <span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">);</span>
  <span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="nx">filename</span><span class="o">:</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">filedata</span><span class="o">:</span> <span class="nx">data</span><span class="p">}));</span>
<span class="p">}</span>

<span class="c1">// call the saveData function after the experiment is over</span>
<span class="nx">jsPsych</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
   <span class="c1">// code to define the experiment structure would go here...</span>
   <span class="nx">on_finish</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span> <span class="nx">saveData</span><span class="p">(</span><span class="s2">&quot;experiment_data&quot;</span><span class="p">,</span> <span class="nx">jsPsych</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">csv</span><span class="p">());</span> <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>To use this in an actual experiment, it would be important to tie the filename to some unique identifier like a subject number. Otherwise the file may be overwritten by collecting new data.</p>
<p>Note that, depending on file permissions, storing the CSV files this way may make them publicly accessible. One fix is to store the CSV files outside the web directory on the server. This requires changing the path in the PHP script above from <code>/data</code> to a non-accessible folder. You should only use this solution if you have access to more than just the web directory on your server.</p>
<h2 id="storing-data-permanently-in-a-mysql-database">Storing data permanently in a MySQL database<a class="headerlink" href="#storing-data-permanently-in-a-mysql-database" title="Permanent link">&para;</a></h2>
<p>The ideal solution for storing data generated by jsPsych is to write it to a database.</p>
<p>There are dozens of database options. MySQL is one of the most popular <a href="http://en.wikipedia.org/wiki/Relational_database">relational databases</a>, is free to use, and relatively easy <a href="https://www.google.com/search?q=how+to+install+mysql">to install</a>. This code will assume that you have a MySQL database installed on your server that is hosting the jsPsych experiment, and that your server is able to execute PHP code. If you are trying to run on a local machine, you'll need to install a local server environment like <a href="https://www.apachefriends.org/index.html">XAMPP</a>.</p>
<p>You'll need two PHP scripts. The first is a configuration file for your database. Save it as <code>database_config.php</code> on your server. Within this file are configuration options for the database. You'll need to change these according to how you have configured your MySQL installation.</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>
  <span class="nv">$servername</span> <span class="o">=</span> <span class="s2">&quot;localhost&quot;</span><span class="p">;</span>
  <span class="nv">$port</span> <span class="o">=</span> <span class="mi">3306</span><span class="p">;</span>
  <span class="nv">$username</span> <span class="o">=</span> <span class="s2">&quot;username&quot;</span><span class="p">;</span>
  <span class="nv">$password</span> <span class="o">=</span> <span class="s2">&quot;password&quot;</span><span class="p">;</span>
  <span class="nv">$dbname</span> <span class="o">=</span> <span class="s2">&quot;database&quot;</span><span class="p">;</span>
  <span class="nv">$table</span> <span class="o">=</span> <span class="s2">&quot;tablename&quot;</span><span class="p">;</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<p>The second PHP file will write data to the database. This script reads the database to discover what columns are in the table, and then only allows data to be entered in that matches those columns. This is a security feature. Save this file as <code>write_data.php</code> on your server.</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="c1">// this path should point to your configuration file.</span>
<span class="k">include</span><span class="p">(</span><span class="s1">&#39;database_config.php&#39;</span><span class="p">);</span>

<span class="nv">$data_array</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nb">file_get_contents</span><span class="p">(</span><span class="s1">&#39;php://input&#39;</span><span class="p">),</span> <span class="k">true</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
  <span class="nv">$conn</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PDO</span><span class="p">(</span><span class="s2">&quot;mysql:host=</span><span class="si">$servername</span><span class="s2">;port=</span><span class="si">$port</span><span class="s2">;dbname=</span><span class="si">$dbname</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nv">$username</span><span class="p">,</span> <span class="nv">$password</span><span class="p">);</span>
  <span class="nv">$conn</span><span class="o">-&gt;</span><span class="na">setAttribute</span><span class="p">(</span><span class="nx">PDO</span><span class="o">::</span><span class="na">ATTR_ERRMODE</span><span class="p">,</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">ERRMODE_EXCEPTION</span><span class="p">);</span>
  <span class="c1">// First stage is to get all column names from the table and store</span>
  <span class="c1">// them in $col_names array.</span>
  <span class="nv">$stmt</span> <span class="o">=</span> <span class="nv">$conn</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="s2">&quot;SHOW COLUMNS FROM `</span><span class="si">$table</span><span class="s2">`&quot;</span><span class="p">);</span>
  <span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
  <span class="nv">$col_names</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
  <span class="k">while</span><span class="p">(</span><span class="nv">$row</span> <span class="o">=</span> <span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">fetchColumn</span><span class="p">())</span> <span class="p">{</span>
    <span class="nv">$col_names</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$row</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="c1">// Second stage is to create prepared SQL statement using the column</span>
  <span class="c1">// names as a guide to what values might be in the JSON.</span>
  <span class="c1">// If a value is missing from a particular trial, then NULL is inserted</span>
  <span class="nv">$sql</span> <span class="o">=</span> <span class="s2">&quot;INSERT INTO </span><span class="si">$table</span><span class="s2"> VALUES(&quot;</span><span class="p">;</span>
  <span class="k">for</span><span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$col_names</span><span class="p">);</span> <span class="nv">$i</span><span class="o">++</span><span class="p">){</span>
    <span class="nv">$name</span> <span class="o">=</span> <span class="nv">$col_names</span><span class="p">[</span><span class="nv">$i</span><span class="p">];</span>
    <span class="nv">$sql</span> <span class="o">.=</span> <span class="s2">&quot;:</span><span class="si">$name</span><span class="s2">&quot;</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="nv">$i</span> <span class="o">!=</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$col_names</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">){</span>
      <span class="nv">$sql</span> <span class="o">.=</span> <span class="s2">&quot;, &quot;</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="nv">$sql</span> <span class="o">.=</span> <span class="s2">&quot;);&quot;</span><span class="p">;</span>
  <span class="nv">$insertstmt</span> <span class="o">=</span> <span class="nv">$conn</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="nv">$sql</span><span class="p">);</span>
  <span class="k">for</span><span class="p">(</span><span class="nv">$i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$data_array</span><span class="p">);</span> <span class="nv">$i</span><span class="o">++</span><span class="p">){</span>
    <span class="k">for</span><span class="p">(</span><span class="nv">$j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$j</span> <span class="o">&lt;</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$col_names</span><span class="p">);</span> <span class="nv">$j</span><span class="o">++</span><span class="p">){</span>
      <span class="nv">$colname</span> <span class="o">=</span> <span class="nv">$col_names</span><span class="p">[</span><span class="nv">$j</span><span class="p">];</span>
      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$data_array</span><span class="p">[</span><span class="nv">$i</span><span class="p">][</span><span class="nv">$colname</span><span class="p">])){</span>
        <span class="nv">$insertstmt</span><span class="o">-&gt;</span><span class="na">bindValue</span><span class="p">(</span><span class="s2">&quot;:</span><span class="si">$colname</span><span class="s2">&quot;</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">PARAM_NULL</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$insertstmt</span><span class="o">-&gt;</span><span class="na">bindValue</span><span class="p">(</span><span class="s2">&quot;:</span><span class="si">$colname</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nv">$data_array</span><span class="p">[</span><span class="nv">$i</span><span class="p">][</span><span class="nv">$colname</span><span class="p">]);</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="nv">$insertstmt</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="k">echo</span> <span class="s1">&#39;{&quot;success&quot;: true}&#39;</span><span class="p">;</span>
<span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">PDOException</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">echo</span> <span class="s1">&#39;{&quot;success&quot;: false, &quot;message&quot;: &#39;</span> <span class="o">.</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
<span class="nv">$conn</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<p>To send the data, we use an AJAX request in JavaScript.
<div class="highlight"><pre><span></span><code><span class="kd">function</span> <span class="nx">saveData</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
  <span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">&#39;POST&#39;</span><span class="p">,</span> <span class="s1">&#39;write_data.php&#39;</span><span class="p">);</span> <span class="c1">// change &#39;write_data.php&#39; to point to php script.</span>
  <span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">);</span>
  <span class="nx">xhr</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">status</span> <span class="o">==</span> <span class="mf">200</span><span class="p">){</span>
      <span class="kd">var</span> <span class="nx">response</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">success</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">jsPsych</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">json</span><span class="p">());</span>
<span class="p">}</span>
</code></pre></div></p>
<p>You can call the <code>saveData()</code> function using the <code>on_finish</code> handler for the experiment, or by using the <code>call-function</code> plugin.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// with on_finish handler</span>
<span class="nx">jsPsych</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
  <span class="nx">on_finish</span><span class="o">:</span> <span class="nx">saveData</span>
<span class="p">});</span>

<span class="c1">// with call-function plugin</span>
<span class="nx">timeline</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
  <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;call-function&#39;</span><span class="p">,</span>
  <span class="nx">func</span><span class="o">:</span> <span class="nx">saveData</span>
<span class="p">});</span>
</code></pre></div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../style/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Controlling Visual Appearance
              </div>
            </div>
          </a>
        
        
          <a href="../running-experiments/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Running Experiments
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2012-2021 Josh de Leeuw
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/jspsych" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://twitter.com/joshdeleeuw" target="_blank" rel="noopener" title="twitter.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.0ac82a11.min.js"></script>
      <script src="../../assets/javascripts/bundle.f81dfb4d.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>