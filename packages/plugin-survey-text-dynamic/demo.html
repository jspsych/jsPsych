<!DOCTYPE html>
<html>
  <head>
    <title>Survey Text Dynamic Plugin Demo</title>
    <script src="https://unpkg.com/jspsych@7.3.1"></script>
    <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@1.1.2"></script>
    <script src="dist/index.browser.min.js"></script>
    <link href="https://unpkg.com/jspsych@7.3.1/css/jspsych.css" rel="stylesheet" type="text/css" />
    <style>
      .jspsych-survey-text-dynamic-question {
        text-align: center;
      }
      .dynamic-inputs-container {
        display: flex;
        justify-content: center;
        align-items: center;
        flex-wrap: wrap;
        gap: 10px;
      }
      .dynamic-inputs-container input,
      .dynamic-inputs-container textarea {
        flex-shrink: 0;
      }
    </style>
  </head>
  <body>
    <script>
      const jsPsych = initJsPsych({
          on_finish: function(data) {
              jsPsych.data.displayData();
          }
      });

      const timeline = [];

      const instructions = {
          type: jsPsychHtmlKeyboardResponse,
          stimulus: `
              <div style="max-width: 600px; margin: 0 auto;">
                  <h2>Survey Text Dynamic Plugin Demo</h2>
                  <p>This demo shows a variation of the survey-text plugin where each question starts with one input field. When you press <strong>Enter</strong> or <strong>spacebar</strong> in an input field, a new input field is created next to it. Press <strong>Backspace</strong> on an empty input field to delete it (except the first one). To move to the next question, you must click with your mouse/trackpad or press <strong>Tab</strong>. Use the submit button to finish the survey.</p>
                  <p>Press any key to continue to the demo.</p>
              </div>
          `,
          choices: "ALL_KEYS"
      };

      const survey = {
          type: jsPsychSurveyTextDynamic,
          questions: [
              {
                  prompt: "What are your hobbies?",
                  name: "hobbies",
                  placeholder: "Enter a hobby..."
              },
              {
                  prompt: "What are your favorite foods?",
                  name: "foods",
                  placeholder: "Enter a food...",
                  required: true
              },
              {
                  prompt: "What skills do you have?",
                  name: "skills",
                  placeholder: "Enter a skill..."
              }
          ],
          preamble: "<p>Please answer the following questions. Press <strong>Enter</strong> or <strong>spacebar</strong> in any input field to create additional fields for that question. Press <strong>Backspace</strong> on an empty field to delete it.</p>",
          button_label: "Submit Survey"
      };

      timeline.push(instructions);
      timeline.push(survey);

      jsPsych.run(timeline);
    </script>
  </body>
</html>
