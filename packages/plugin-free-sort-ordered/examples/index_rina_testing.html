<!DOCTYPE html>
<html>
  <head>
    <title>jsPsychPluginFreeSortOrdered Example</title>
    <script src="https://unpkg.com/jspsych"></script>
    <script src="https://cdn.jsdelivr.net/npm/plain-draggable@2.5.15"></script>
    <!-- Load the published plugin package here, e.g.
<script src="https://unpkg.com/plugin-free-sort-ordered"></script>
<script src="../dist/index.browser.js"></script> -->
    <script src="../dist/index.browser.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/jspsych/css/jspsych.css" />
    <link rel="stylesheet" href="../src/styles.css" />
  </head>

  <body></body>
  <script>
    const jsPsych = initJsPsych({
      on_finish: function() {
        jsPsych.data.displayData();
      }
    });

//first, a basic trial. boxes are black. participants can sort how they please. As long as all stimuli are sorted in a box, they may proceed.

    const trial1 = {
      type: jsPsychPluginFreeSortOrdered,
      stimulus: [
        {id: 0, file: '../assets/blue-rec.png', height: 100, width: 200},
        {id: 1, file: '../assets/green-rec.png', height: 100, width: 200},
        {id: 2, file: '../assets/red-rec.png', height: 100, width: 200}
      ],
      holding_area_location: "above",
      stim_height: 100,
      stim_width: 120,
      scale_factor: 1.1,
      boxes: [
        {id: 0, color: '#000000', height: 100, width: 200},
        {id: 1, color: '#000000', height: 100, width: 200},
        {id: 2, color: '#000000', height: 100, width: 200}
      ],
      use_correctness: false,
      box_margin: 40,
      box_hover_color: "#40E0D0",
      snap_margin: 20,
      prompt: 'Drag and drop the boxes to sort them in order. (Same number of stimuli and boxes. Once all stimuli . Include messages to encourage your participant to finish the task.)',
      prompt_location: 'above',
	    <!--above is the only option.-->
      button_label: 'Continue',
      include_counter: true,
      counter_text_unfinished: 'your job is not done. get to work!',
      counter_text_finished: 'nice',
      allow_multiple_per_box: false,
	    <!--allow_multiple_per_box false is not working yet.-->
      show_button: "always",
	    <!--show_button doesn't seem to be independent of use_correctness yet-->
      use_completeness_criteria: true,
      completeness_criteria: "exact_correct_answers",
	    <!--use_completeness criteria (currently use_criteria) and completeness criteria are either not parameters or are not in use.-->
      trial_duration: 60000,
	    <!--trial_duration is not yet in use. -->
      response_ends_trial: true
	    <!--response_ends_trial is not yet in use-->
    };

    const trial2 = {
      type: jsPsychPluginFreeSortOrdered,
      stimulus: [
        {id: 0, file: '../assets/blue-rec.png', height: 100, width: 200},
        {id: 1, file: '../assets/green-rec.png', height: 100, width: 200},
        {id: 2, file: '../assets/red-rec.png', height: 100, width: 200}
      ],
      stim_height: 100,
      stim_width: 120,
      scale_factor: 1.1,
      holding_area_location: "left",
      boxes: [
        {id: 0, color: '#0271bc', height: 100, width: 200},
        {id: 1, color: '#3ab54b', height: 100, width: 200},
        {id: 2, color: '#FF0000', height: 100, width: 200}
      ],
      use_correctness: true,
      correctness_by: "id",
      box_margin: 40,
      box_hover_color: "#40E0D0",
      snap_margin: 20,
      prompt: 'Same, except holding area is on the left . Messages tell participants how many more stimuli they have left before they can proceed)',
      prompt_location: 'above',
      button_label: 'Continue',
      include_counter: true,
      allow_multiple_per_box: false,
      show_button: "always",
    };

    const trial3 = {
      type: jsPsychPluginFreeSortOrdered,
      prompt: 'Changed the location of the holding area. Continue button will show up as long as all boxes are full, regardless of correctness.',
      scale_factor: 1.1,
      holding_area_location: "above",
      box_margin: 40,
      snap_margin: 20,
      prompt_location: 'above',
      button_label: 'Continue',
      include_counter: true,
      stimulus: [
        {id: 0, file: '../assets/blue-rec.png', height: 100, width: 200},
        {id: 1, file: '../assets/green-rec.png', height: 100, width: 200},
        {id: 2, file: '../assets/red-rec.png', height: 100, width: 200},
      ],
      stim_height: 100, 
      <!--Debug note! If you dont include these stim height and width parameters, you get bad box clicking behavior-->
      stim_width: 120,
      boxes: [
        {id: 0, color: '#0271bc', height: 100, width: 200},
        {id: 1, color: '#3ab54b', height: 100, width: 200},
        {id: 2, color: '#FF0000', height: 100, width: 200},
      ],
      use_correctness: false
    };


    const trial10 = {
      type: jsPsychPluginFreeSortOrdered,
      prompt: 'WONT WORK YET. This is a trial with a correct answer. You have to put all of the green shapes in the single box before you can move on.',
      scale_factor: 1.1,
      holding_area_location: "right",
      box_margin: 40,
      snap_margin: 20,
      prompt_location: 'above',
      button_label: 'Continue',
      include_counter: false,
      stimulus: [
        {id: 0, file: '../assets/green-circle.png', height: 100, width: 100},
        {id: 0, file: '../assets/green-triangle.png', height: 100, width: 100},
        {id: 0, file: '../assets/green-square.png', height: 100, width: 100},
        {id: 1, file: '../assets/orange-circle.png', height: 100, width: 100},
        {id: 1, file: '../assets/purple-triangle.png', height: 100, width: 100},
        {id: 1, file: '../assets/purple-square.png', height: 100, width: 100}
      ],
      stim_height: 100, 
      stim_width: 120,
      boxes: [
        {id: 0, colour: '#0271bc', height: 100, width: 200}
      ],
      use_correctness: true,
      correctness_by: 'id',
      use_criteria: true,
      criteria: 'exact_correct_answers',
      show_button: 'on_criteria'
    };

    const trial11 = {
      type: jsPsychPluginFreeSortOrdered,
      prompt: 'WONT WORK YET. Put the circles in the red box, the triangles in the blue box, and the squares in the green box. The trial will advance automatically once you put the last shape in the boxes, even if the answer is wrong.',
      scale_factor: 1.1,
      box_margin: 40,
      snap_margin: 20,
      prompt_location: 'above',
      button_label: 'Continue',
      include_counter: false,
      stimulus: [
        {id: 0, file: '../assets/green-circle.png', height: 100, width: 100},
        {id: 1, file: '../assets/green-triangle.png', height: 100, width: 100},
        {id: 2, file: '../assets/green-square.png', height: 100, width: 100},
        {id: 0, file: '../assets/orange-circle.png', height: 100, width: 100},
        {id: 1, file: '../assets/purple-triangle.png', height: 100, width: 100},
        {id: 2, file: '../assets/purple-square.png', height: 100, width: 100}
      ],
      stim_height: 100, 
      stim_width: 120,
      boxes: [
        {id: 0, colour: 'Red', height: 100, width: 200},
        {id: 1, colour: 'Blue', height: 100, width: 200},
        {id: 2, colour: 'Green', height: 100, width: 200}
      ],
      use_correctness: false,
      use_criteria: true,
      criteria: 'all_items_sorted',
      response_ends_trial: true 
    };
    
    
    jsPsych.run([trial1, trial2, trial3])
  </script>
</html>
